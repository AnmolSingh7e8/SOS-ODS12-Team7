<!DOCTYPE html>
<html lang="ca">

<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Recursos - ODS 12</title>
  <link rel="stylesheet" href="/style/infoStyle.css" />
  <script src="https://cdn.jsdelivr.net/npm/chart.js"></script>
  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>
</head>

<body>
  <div id="particles-js"></div>
  <header>
    <h1>Investigación ODS 12</h1>
  </header>
  <nav>
    <ul>
      <li><a href="/">Inicio</a></li>
      <li><a href="/info">Investigación</a></li>
      <li><a href="/buscador">Buscador</a></li>
      <li><a href="/mapa">Mapa</a></li>
      <li><a href="/conclusiones">Conclusión</a></li>
    </ul>
  </nav>

  <div class="ods-main-sections">
    <section id="ods-info" class="ods-info">
      <h2>ODS Elegido</h2>
      <div class="ods-flex">
        <div class="ods-text">
          <p><strong>ODS 12: Producción y consumo responsables</strong></p>
          <p>
          <p>
            ODS 12 busca producir más y mejores bienes utilizando menos recursos, promoviendo la eficiencia y <br> la
            reducción de residuos a través del reciclaje y la reutilización. El objetivo es fomentar patrones de <br> consumo
            y producción sostenibles. El enfoque del proyecto ha sido principalmente el reciclaje de<br> recursos y la
            cantidad producida, analizando cómo una buena gestión de residuos contribuye a<br> la sostenibilidad.
          </p>
          </p>
        </div>
        <img src="/style/src/ODS12.jpg" alt="ODS 12" class="ods-image">
      </div>
      <h3>Indicador utilizado</h3>
      <ul>
        <li>
          <strong>Indicador 12.5.1:</strong> Tasa nacional de reciclaje, toneladas de material reciclado.<br>
          Este es el indicador principal abordado en el análisis.
        </li>
        <li>
          Además, se mencionan otros indicadores secundarios relacionados:
          <ul>
            <li><strong>12.4.2:</strong> Cantidad de residuos peligrosos generados por cápita y su tratamiento.</li>
            <li><strong>12.3.1:</strong> Pérdidas de alimentos (indirectamente si hay residuos alimentarios en los
              datos).</li>
            <li><strong>12.1.1:</strong> Políticas y planes de acción relacionados con producción/consumo responsables.
            </li>
          </ul>
        </li>
      </ul>
      <h3>Datasets utilizados</h3>
      <ul>
        <li>
          <strong>Estadísticas de residuos municipales: </strong>
          <a href="https://analisi.transparenciacatalunya.cat/es/Medi-Ambient/Estad-stiques-de-residus-municipals/69zu-w48s/about_data"
            target="_blank">
            Ver dataset original
          </a>
          El dataset recoge las estadísticas de residuos municipales
          de Catalunya. Concretamente, incorpora la cantidad de recogida selectiva por las diferentes fracciones,
          los totales de recogida selectiva en términos
          absolutos y per cápita, y la cantidad de la fracción resta por destino, más los totales de la fracción
          permanece también en términos absolutos y por cápita.
        </li>
        <li>
          <strong>Datos de hábitos de consumo y compra: </strong>
          <a href="https://www.diba.cat/es/web/comerc/encuesta-habitos-de-consumo-y-compra" target="_blank">
            Ver dataset original
          </a>
          El dataset está formado a base de unas encuestas sobre los Hábitos de Consumo y Compra analizando cada
          dos años cómo compran los hogares en la provincia de Barcelona. Ofrece datos sobre preferencias,
          frecuencia y canales de compra para apoyar políticas públicas locales.
        </li>
      </ul>
    </section>
  </div>

  <section class="ods-table-section">
    <h3 class="ods-table-title">Relación con la economía circular y ODS</h3>
    <div class="ods-table-container">
      <table class="ods-table">
        <thead>
          <tr>
            <th>Ámbito de acción</th>
            <th>Relación con la economía circular</th>
            <th>Indicador medible con datos de este ODS</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td>Gestión de residuos</td>
            <td>Fomentar la reutilización, reparación y reciclaje de materiales para reducir residuos en vertederos.
            </td>
            <td>Tasa nacional de reciclaje (Indicador 12.5.1)</td>
          </tr>
          <tr>
            <td>Producción sostenible</td>
            <td>Implementar procesos que utilicen menos recursos, generen menos residuos y diseñen productos duraderos.
            </td>
            <td>Huella material per cápita (Indicador 12.2.2)</td>
          </tr>
          <tr>
            <td>Consumo responsable</td>
            <td>Promover hábitos de compra sostenibles y reducir el desperdicio.</td>
            <td>Residuos per cápita (relacionado, pero no indicador ODS directo)</td>
          </tr>
          <tr>
            <td>Uso eficiente de los recursos naturales</td>
            <td>Minimizar la extracción de recursos naturales y optimizar su aprovechamiento.</td>
            <td>Consumo de agua per cápita (Indicador 6.4.1 / 6.4.2)</td>
          </tr>
          <tr>
            <td>Gestión de sustancias químicas y residuos peligrosos</td>
            <td>Reducir la producción de sustancias nocivas y gestionar residuos peligrosos de manera segura.</td>
            <td>Cantidad de residuos peligrosos per cápita (Indicador 12.4.2, parte A)</td>
          </tr>
          <tr>
            <td>Compras públicas sostenibles</td>
            <td>Utilizar la demanda pública para impulsar productos y servicios sostenibles.</td>
            <td>Proporción de países con políticas de contratación pública sostenible (Indicador 12.7.1)</td>
          </tr>
        </tbody>
      </table>
    </div>
  </section>

  <!-- GRÁFICOS FUERA DE CARTA, LIBRES Y EN TABLA 2x2 -->
  <section id="graficos" class="grafico-container">
    <div class="titulo-separador">
      <h3>Gráficos de Residuos</h3>
    </div>
    <div class="graficos-table">
      <div>
        <h4>Cantidad total de diferentes tipos de residuos</h4>
        <p>¿Cuáles son los tipos de residuos más generales?</p>
        <canvas id="barChartWaste"></canvas>
        <p>Como podemos observar en la visualización el papel y el cartón, el vidrio, los envases ligeros, la materia
          orgánica y los residuos voluminosos (+ madera) son los residuos más generales. </p>
      </div>
      <div>
        <h4>Generación de residuos a lo largo del tiempo</h4>
        <p>Ha habido una evolución en la cantidad de residuos generados a lo largo del tiempo?</p>
        <canvas id="lineChartWaste"></canvas>
        <p>
          A lo largo de estos últimos años se pueden observar tres grandes cambios en la generación de residuos:<br><br>
          <strong>2000-2007:</strong> Durante estos años la cantidad de residuos notó un crecimiento constante en su
          generación de residuos, llegando a su pico máximo en 2007.<br><br>
          <strong>2008-2013:</strong> En este año la generación de residuos disminuyó de manera desmesurada en donde
          seguramente se asocia con la crisis económica global que hubo. En donde la actividad económica disminuyó, es
          decir, menos generación de residuos.<br><br>
          <strong>2014-actualidad (2025):</strong> A partir de 2013 la generación vuelve a aumentar pero no a los
          niveles de años anteriores. Actualmente, parece que está volviendo a bajar, pero a pasos más lentos y
          pequeños.
        </p>
      </div>
      <div>
        <h4>Top 20 Municipios con más Generación de Residuos</h4>
        <p>¿Hay alguna diferencia significativa en la cantidad de residuos generados entre diferentes zonas geográficas
          o poblaciones? </p>
        <canvas id="top20MunicipisChart"></canvas>
        <p>Las zonas con
          más residuos generados son las grandes ciudades, demostrando que hay una diferencia notable a
          comparación de poblaciones más pequeñas.</p>
      </div>
      <div>
        <h4>Distribución de Kg/hab/año por Comarca (2023)</h4>
        <div id="boxplotComarca"></div>
      </div>
    </div>
  </section>
  </section>

  <!-- NUEVO APARTADO: GRÁFICOS DE COMPRAS -->
  <section id="graficos-compras" class="grafico-container">
    <div class="titulo-separador">
      <h3>Gráficos de Compras y preferencias sobre los productos de sostenibles</h3>
    </div>
    <div class="graficos-table">
      <div>
        <h4>Canal de compra preferido según municipio</h4>
        <p>¿En qué canal compran más los hogares según el municipio?</p>
        <canvas id="barChartMunicipios"></canvas>
        <p>Este gráfico muestra la preferencia de canal de compra en diferentes municipios.</p>
      </div>
      <div>
        <h4>Preferencia por productos sostenibles</h4>
        <p>¿Qué porcentaje de consumidores prefiere productos sostenibles?</p>
        <canvas id="pieChartSostenibles"></canvas>
        <p>Se observa la proporción de consumidores que priorizan productos convencionales frente a los sostenibles.</p>
      </div>
      <div>
        <h4>Motivos para elegir productos sostenibles</h4>
        <p>¿Cuáles son las razones principales por las que los consumidores eligen productos sostenibles?</p>
        <canvas id="barChartMotivos"></canvas>
        <p>Este gráfico muestra los motivos más frecuentes para preferir productos sostenibles.</p>
      </div>
      <div>
        <h4>Evolución del interés en sostenibilidad</h4>
        <p>¿Cómo ha cambiado el interés por la sostenibilidad en los últimos años?</p>
        <canvas id="lineChartInteres"></canvas>
        <p>Se observa la tendencia creciente en el interés por la sostenibilidad entre los consumidores.</p>
      </div>
    </div>
  </section>
  </div>

  <footer>
    <p>Team 7 - Anmolpreet Singh - Angel Sardinha - Ainara Valdivieso - Usman Rashid</p>
    <p>Instituto Tecnológico de Barcelona</p>
  </footer>

  <script>
    // Gráfico de barras: Frecuencia de compra por canal
    // Gráfico de barras agrupadas: Canal de compra preferido según municipio
    const municipios = ['Barcelona', 'Sabadell', 'Terrassa'];
    const canalesMunicipio = ['Supermercado', 'Mercado local', 'Tienda online', 'Pequeño comercio'];
    const datosMunicipios = [
      [65, 15, 12, 8], // Barcelona
      [55, 25, 10, 10], // Sabadell
      [50, 30, 12, 8]   // Terrassa
    ];

    const datasetsMunicipios = canalesMunicipio.map((canal, i) => ({
      label: canal,
      data: datosMunicipios.map(m => m[i]),
      backgroundColor: ['#4e79a7', '#f28e2b', '#e15759', '#76b7b2'][i]
    }));

    new Chart(document.getElementById('barChartMunicipios'), {
      type: 'bar',
      data: {
        labels: municipios,
        datasets: datasetsMunicipios
      },
      options: {
        responsive: true,
        plugins: { legend: { position: 'top' } },
        scales: { x: { stacked: false }, y: { beginAtZero: true } }
      }
    });

    // Gráfico circular: Preferencia por productos sostenibles
    const preferencias = ['Prefiere convencionales', 'Prefiere sostenibles'];
    const porcentaje = [68, 32]; // Datos de ejemplo

    new Chart(document.getElementById('pieChartSostenibles'), {
      type: 'pie',
      data: {
        labels: preferencias,
        datasets: [{
          data: porcentaje,
          backgroundColor: ['#bab0ab', '#59a14f']
        }]
      },
      options: { responsive: true }
    });

    // Gráfico de barras: Motivos para elegir productos sostenibles
const motivos = ['Cuidado ambiental', 'Salud', 'Calidad', 'Precio', 'Tendencia'];
const porcentajeMotivos = [45, 25, 15, 10, 5];

new Chart(document.getElementById('barChartMotivos'), {
  type: 'bar',
  data: {
    labels: motivos,
    datasets: [{
      label: 'Porcentaje (%)',
      data: porcentajeMotivos,
      backgroundColor: ['#59a14f', '#4e79a7', '#f28e2b', '#e15759', '#bab0ab']
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { display: false } },
    scales: { y: { beginAtZero: true } }
  }
});

// Gráfico de líneas: Evolución del interés en sostenibilidad
const anios = ['2018', '2019', '2020', '2021', '2022', '2023', '2024'];
const interes = [30, 35, 40, 50, 60, 68, 75];

new Chart(document.getElementById('lineChartInteres'), {
  type: 'line',
  data: {
    labels: anios,
    datasets: [{
      label: 'Interés (%)',
      data: interes,
      borderColor: '#4e79a7',
      backgroundColor: 'rgba(76, 175, 80, 0.2)',
      fill: true,
      tension: 0.3
    }]
  },
  options: {
    responsive: true,
    plugins: { legend: { position: 'top' } },
    scales: { y: { beginAtZero: true } }
  }
});
  </script>
  <script>
    fetch('/dB/Db.json')
      .then(r => r.json())
      .then(data => {
        // Gráfico de barras de tipos de residuos
        const wasteColumns = ['paper_i_cartr', 'vidre', 'envasos_lleugers', 'mat_ria_org_nica', 'residus_voluminosos_fusta'];
        const wasteLabels = ['Paper i cartró', 'Vidre', 'Envasos lleugers', 'Matèria orgànica', 'Residus voluminosos + fusta'];
        const wasteSums = wasteColumns.map(col =>
          data.reduce((sum, row) => sum + (parseFloat(row[col]) || 0), 0)
        );

        new Chart(document.getElementById('barChartWaste'), {
          type: 'bar',
          data: {
            labels: wasteLabels,
            datasets: [{
              label: 'Total Quantitat (kg)',
              data: wasteSums,
              backgroundColor: ['skyblue', 'lightcoral', 'lightgreen', 'gold', 'plum']
            }]
          },
          options: { responsive: true, plugins: { legend: { display: false } } }
        });

        // Gráfico de línea de residuos por año
        const years = [...new Set(data.map(row => row['any']))].sort((a, b) => parseInt(a) - parseInt(b));
        const wastePerYear = years.map(year =>
          data.filter(row => row['any'] == year)
            .reduce((sum, row) => sum + (parseFloat(row['generaci_residus_municipal']) || 0), 0)
        );

        new Chart(document.getElementById('lineChartWaste'), {
          type: 'line',
          data: {
            labels: years,
            datasets: [{
              label: 'Total Residus (kg)',
              data: wastePerYear,
              borderColor: 'teal',
              fill: false
            }]
          },
          options: { responsive: true, plugins: { legend: { display: false } } }
        });

        // Boxplot por comarca
        const df2023 = data.filter(row => row['any'] === '2023' && row['comarca'] && row['kg_hab_any']);
        const comarques = [...new Set(df2023.map(row => row['comarca']))];
        const boxData = comarques.map(comarca => ({
          y: df2023.filter(row => row['comarca'] === comarca).map(row => parseFloat(row['kg_hab_any'])),
          type: 'box',
          name: comarca
        }));

        Plotly.newPlot('boxplotComarca', boxData, {
          margin: { t: 30, b: 120 },
          title: 'Distribució de Kg/hab/any per Comarca (2023)',
          xaxis: { tickangle: -45 }
        });

        // Top 20 Municipis amb més generació de residus (gráfico de barras horizontal)
        const latestYear = Math.max(...data.map(row => parseInt(row['any'])).filter(Boolean));
        const dfLatestYear = data.filter(row => parseInt(row['any']) === latestYear && row['municipi'] && row['generaci_residus_municipal']);
        const municipiTotals = {};

        dfLatestYear.forEach(row => {
          const municipi = row['municipi'];
          const residus = parseFloat(row['generaci_residus_municipal']) || 0;
          if (municipiTotals[municipi]) {
            municipiTotals[municipi] += residus;
          } else {
            municipiTotals[municipi] = residus;
          }
        });

        const top20 = Object.entries(municipiTotals)
          .sort((a, b) => b[1] - a[1])
          .slice(0, 20);

        new Chart(document.getElementById('top20MunicipisChart'), {
          type: 'bar',
          data: {
            labels: top20.map(item => item[0]),
            datasets: [{
              label: 'Generació Total de Residus (kg)',
              data: top20.map(item => item[1]),
              backgroundColor: 'rgba(34, 139, 34, 0.7)'
            }]
          },
          options: {
            indexAxis: 'y',
            responsive: true,
            plugins: { legend: { display: false } },
            scales: {
              y: { ticks: { font: { size: 11 } } }
            }
          }
        });
      })
      .catch(error => console.error("Error carregant el JSON:", error));
  </script>
  <script src="/particulas/particles.min.js"></script>
  <script>
    particlesJS.load('particles-js', '/particulas/particlesjs-config.json');
  </script>
</body>

</html>